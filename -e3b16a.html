<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- iOS Safari -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<!-- Chrome, Firefox OS and Opera Status Bar Color -->
<meta name="theme-color" content="#FFFFFF">
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css">
<link rel="stylesheet" type="text/css"
  href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.19.0/themes/prism.min.css">
<link rel="stylesheet" type="text/css" href="css/SourceSansPro.css">
<link rel="stylesheet" type="text/css" href="css/theme.css">
<link rel="stylesheet" type="text/css" href="css/notablog.css">
<!-- Favicon -->

  <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;📖&lt;/text&gt;&lt;/svg&gt;">

<style>
  :root {
    font-size: 20px;
  }
</style>
  <title>关系型数据库 - MySQL&nbsp;|&nbsp;Welcome to Robin’s Blog</title>
  <meta property="og:type" content="blog">
  <meta property="og:title" content="关系型数据库 - MySQL">
  
  
    <meta property="og:image" content="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;📓&lt;/text&gt;&lt;/svg&gt;">
  
  <style>
    .DateTagBar {
      margin-top: 1.0rem;
    }
  </style>
</head>

<body>
  <nav class="Navbar">
  <a href="index.html">
    <div class="Navbar__Btn">
      
        <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;📖&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
      
      <span>Home</span>
    </div>
  </a>
  
    
  
    
  
    
  
    
  
    
  
    
      <span class="Navbar__Delim">&centerdot;</span>
      <a href="-d98406.html">
        <div class="Navbar__Btn">
          
            <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;😀&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
          
          <span>About ME</span>
        </div>
      </a>
    
  
    
  
    
  
    
  
</nav>
  <header class="Header">
    
      <div class="Header__Cover">
        <img src="https://images.unsplash.com/photo-1542285570-a281a583dfd0?ixlib=rb-4.0.3&amp;q=80&amp;fm=jpg&amp;crop=entropy&amp;cs=tinysrgb">
      </div>
    
    <div class="Header__Spacer ">
    </div>
    
      <div class="Header__Icon">
        <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;📓&lt;/text&gt;&lt;/svg&gt;"></span>
      </div>
    
    <h1 class="Header__Title">关系型数据库 - MySQL</h1>
    
      <div class="DateTagBar">
        
          <span class="DateTagBar__Item DateTagBar__Date">Posted on Sun, Feb 26, 2023</span>
        
        
          <span class="DateTagBar__Item DateTagBar__Tag DateTagBar__Tag--gray">
            <a href="tag/大数据.html">大数据</a>
          </span>
        
          <span class="DateTagBar__Item DateTagBar__Tag DateTagBar__Tag--brown">
            <a href="tag/MySQL.html">MySQL</a>
          </span>
        
          <span class="DateTagBar__Item DateTagBar__Tag DateTagBar__Tag--purple">
            <a href="tag/数据库.html">数据库</a>
          </span>
        
      </div>
    
  </header>
  <article id="https://www.notion.so/e3b16a8eca8940a5843487ade231dc8a" class="PageRoot"><ul id="https://www.notion.so/a817635e3a884526bea5a8af2aa449ea" class="ColorfulBlock ColorfulBlock--ColorGray TableOfContents"><li class="TableOfContents__Item"><a href="#https://www.notion.so/8e8e1464f2794c95b7f397198c324f30"><div style="margin-left:0px"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorBlue"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">什么是关系型数据库？</strong></strong></mark></span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/18896da2c7e64904873da9c25469c0b9"><div style="margin-left:0px"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorBlue">关系数据库模型</mark></span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/53a7b39a86c74e6db312f9b0c8761942"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorGreen">层次模型</mark></span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/a390ef1e02cd4c758cf8ac10340fa50e"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorGreen">网状模型</mark></span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/161948dad7c74d1e9556b03ab65d3a75"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorGreen">关系模型</mark></span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/a2d0f0ae3fc640efab194efe1d99b6c0"><div style="margin-left:0px"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorBlue">SQL</mark></span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/f885e0d69b1b4f1383041c7f4557b874"><div style="margin-left:0px"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorBlue">MySQL</mark></span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/c941403b64084ba4ba8fb1976a216385"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorGreen">基础架构及SQL执行过程</mark></span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/2b794c719e004826a504c024e94087ab"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorGreen">查询/修改/定义 语句</mark></span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/c17677fdd56d478982b1a31f70c60f95"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorGreen">PROCEDURE, FUNCTION, TRIGGER</mark></span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/a0bb851be5324270a21968830c4a995d"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorPurple">Trigger</mark></span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/09785f209c3642dea8f8a0af143e4aab"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorPurple">Procedure</mark></span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/3dba3b256fbf4d8fa0a6ba6615ca5c7f"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorPurple">Function</mark></span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/2a099897c67b47659436e723caf3030c"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorGreen">EVENT</mark></span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/c7f356b733a041908eca03491e35fef7"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorGreen">VIEW</mark></span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/1f9a516112a342d18a779fae9031f89a"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorGreen">MySQL索引（Index）</mark></span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/ca2c0279733b4268ac725ada3a885df1"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorPurple">什么是索引？</mark></span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/6db713dc840d4a7face4e834d532da51"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorPurple"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">索引的优缺点</strong></mark></span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/3285a3b462fd4940ad6de6fa0cd409d1"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorPurple">语句</mark></span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/78337035086d44d5a77f7e468db43fdc"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorPurple">索引类型</mark></strong></span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/f77e7b649a944ed2a40a1c58f41d12d1"><div style="margin-left:48px"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorPurple"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">正确使用索引的建议</strong></mark></span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/ccb7326e6b8c4e7b84a1bfe757c6cb67"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorGreen">MySQL事务（Transaction）</mark></span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/d304108abbc544dda3c2a7f801ef5d5a"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorGreen">MySQL锁（Lock）</mark></span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/010bb296c07f4f0fbca33a0c400fa5f9"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorGreen">WINDOW FUNCTION</mark></span></span></div></a></li></ul><h1 id="https://www.notion.so/8e8e1464f2794c95b7f397198c324f30" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/8e8e1464f2794c95b7f397198c324f30"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorBlue"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">什么是关系型数据库？</strong></strong></mark></span></span></h1><div id="https://www.notion.so/3df54683d1294cd3a6d4845bdddef6cc" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">关系型数据库 (RDB) 是一种在表、行和列中构建信息结构的方法。RDB 可以通过联接表来在信息之间建立关联或关系，从而使用户可以轻松理解和分析各种数据点之间的关系。</span></span></p></div><div id="https://www.notion.so/1e34f5c1519b45d393efca56bf99d774" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">每个应用程序都各自写自己的读写数据的代码，一方面效率低，容易出错，另一方面，每个应用程序访问数据的接口都不相同，数据难以复用。而基于关系数据库，应用程序不需要自己管理数据，而是通过数据库软件提供的接口来读写数据。</span></span></p></div><div id="https://www.notion.so/89bb0666558342608b1e5f440d247f07" class="Image Image--Normal"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F5d68ec97-5d24-4c02-9004-7365af0d9b84%2FUntitled.png?width=240&amp;table=block&amp;id=89bb0666-5583-4260-8b1e-5f440d247f07"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F5d68ec97-5d24-4c02-9004-7365af0d9b84%2FUntitled.png?width=240&amp;table=block&amp;id=89bb0666-5583-4260-8b1e-5f440d247f07" style="width:240px"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><h1 id="https://www.notion.so/18896da2c7e64904873da9c25469c0b9" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/18896da2c7e64904873da9c25469c0b9"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorBlue">关系数据库模型</mark></span></span></h1><h2 id="https://www.notion.so/53a7b39a86c74e6db312f9b0c8761942" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/53a7b39a86c74e6db312f9b0c8761942"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorGreen">层次模型</mark></span></span></h2><div id="https://www.notion.so/607a1e4f46d649ab81c24e5ce1898eb7" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">层次模型就是以“上下级”的层次关系来组织数据的一种方式，层次模型的数据结构看起来就像一颗树。</span></span></p></div><div id="https://www.notion.so/2b54582304254821b8a10db371f13282" class="Image Image--Normal"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Faae5e9b2-e202-489b-966f-0a8eea79f0e0%2FUntitled.png?width=288&amp;table=block&amp;id=2b545823-0425-4821-b8a1-0db371f13282"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Faae5e9b2-e202-489b-966f-0a8eea79f0e0%2FUntitled.png?width=288&amp;table=block&amp;id=2b545823-0425-4821-b8a1-0db371f13282" style="width:288px"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><h2 id="https://www.notion.so/a390ef1e02cd4c758cf8ac10340fa50e" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/a390ef1e02cd4c758cf8ac10340fa50e"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorGreen">网状模型</mark></span></span></h2><div id="https://www.notion.so/7694a0c2c71241ffb9ba68a8795c41ad" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">网状模型把每个数据节点和其他很多节点都连接起来，它的数据结构看起来类似于多个城市之间的路网。</span></span></p></div><div id="https://www.notion.so/af056d849b994497ad54f9d5c2e1cea0" class="Image Image--Normal"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F1c8559de-e0bf-4125-a771-28801f70d55a%2FUntitled.png?width=336&amp;table=block&amp;id=af056d84-9b99-4497-ad54-f9d5c2e1cea0"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F1c8559de-e0bf-4125-a771-28801f70d55a%2FUntitled.png?width=336&amp;table=block&amp;id=af056d84-9b99-4497-ad54-f9d5c2e1cea0" style="width:336px"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><h2 id="https://www.notion.so/161948dad7c74d1e9556b03ab65d3a75" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/161948dad7c74d1e9556b03ab65d3a75"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorGreen">关系模型</mark></span></span></h2><ul class="BulletedListWrapper"><li id="https://www.notion.so/d2fcf44d74f84b1baf8381e94442c4f0" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">关系模型把数据看作是一个二维表格，任何数据都可以通过行号+列号来唯一确定，它的数据模型看起来就是一个Excel表。</span></span></li><li id="https://www.notion.so/879f1118a39c446180b4c7967601e76f" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">特性（列）指定了数据类型，并且每条记录（或每行）都包含该特定数据类型的值。关系型数据库中的所有表都有一个称为</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">主键</strong></span><span class="SemanticString">的特性（该特性是行的唯一标识符），并且每行都可以用于使用</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">外键</strong></span><span class="SemanticString">
（对另一个现有表的主键的引用）创建不同表之间的关系。</span></span></li><li id="https://www.notion.so/725781ade64a4ad9acebb618b690709c" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">随着时间推移，理解和使用起来最简单的关系模型逐渐占据主流应用。</span></span></li><li id="https://www.notion.so/91c142b1d4404fb1b5643208fdf3d925" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">对于一个关系表，除了定义每一列的名称外，还需要定义每一列的数据类型。关系数据库支持的标准数据类型包括数值、字符串、时间等</span></span></li><li id="https://www.notion.so/a60348f405b140d0a2f519e6c5ebb722" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">当下的主流关系模型数据库</span></span><ul class="BulletedListWrapper"><li id="https://www.notion.so/5bec570df9cf429ebc0a298199f135b9" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">商用数据库，例如：</span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://www.oracle.com/">Oracle</a></span><span class="SemanticString">，</span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://www.microsoft.com/sql-server/">SQL Server</a></span><span class="SemanticString">，</span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://www.ibm.com/db2/">DB2</a></span><span class="SemanticString">等；</span></span></li><li id="https://www.notion.so/8417d8d810074838acf4ea68ad533126" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">开源数据库，例如：</span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://www.mysql.com/">MySQL</a></span><span class="SemanticString">，</span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://www.postgresql.org/">PostgreSQL</a></span><span class="SemanticString">等；</span></span></li><li id="https://www.notion.so/840c2ce4bba14f47ae06e715639ae023" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">桌面数据库，以微软</span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://products.office.com/access">Access</a></span><span class="SemanticString">为代表，适合桌面应用程序使用；</span></span></li><li id="https://www.notion.so/033aa900edc04687aaba1caaf6ccd6ca" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">嵌入式数据库，以</span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://sqlite.org/">Sqlite</a></span><span class="SemanticString">为代表，适合手机应用和桌面程序。</span></span></li></ul></li></ul><h1 id="https://www.notion.so/a2d0f0ae3fc640efab194efe1d99b6c0" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/a2d0f0ae3fc640efab194efe1d99b6c0"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorBlue">SQL</mark></span></span></h1><div id="https://www.notion.so/134fc7273ac4447385f8b4858fa49a04" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">SQL是结构化查询语言的缩写，用来访问和操作数据库系统。SQL语句既可以查询数据库中的数据，也可以添加、更新和删除数据库中的数据，还可以对数据库进行管理和维护操作。不同的数据库，都支持SQL，这样，我们通过学习SQL这一种语言，就可以操作各种不同的数据库。</span></span></p></div><div id="https://www.notion.so/a82b873ec8a24e9697ea1ff95d5ecf97" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">总的来说，SQL语言定义的几种操作数据库的能力如下描述：</span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/080db32ed7c247f4a736f64251e67822" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">DDL（Data Definition Language）：</strong></span><span class="SemanticString">DDL允许用户定义数据，也就是创建表、删除表、修改表结构这些操作。通常，DDL由数据库管理员执行。</span></span></li><li id="https://www.notion.so/673fa4618e89480eb0f45905423a3909" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">DML（Data Manipulation Language）：</strong></span><span class="SemanticString">DML为用户提供添加、删除、更新数据的能力，这些是应用程序对数据库的日常操作。</span></span></li><li id="https://www.notion.so/bf7b5e88a5db43b0952a52a0c3103b95" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">DQL（Data Query Language）：</strong></span><span class="SemanticString">DQL允许用户查询数据，这也是通常最频繁的数据库日常操作。</span></span></li></ul><h1 id="https://www.notion.so/f885e0d69b1b4f1383041c7f4557b874" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/f885e0d69b1b4f1383041c7f4557b874"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorBlue">MySQL</mark></span></span></h1><h2 id="https://www.notion.so/c941403b64084ba4ba8fb1976a216385" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/c941403b64084ba4ba8fb1976a216385"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorGreen">基础架构及SQL执行过程</mark></span></span></h2><details id="https://www.notion.so/62320439b0ae484e98070d6f13bee52e" class="ColorfulBlock ColorfulBlock--ColorDefault Toggle "><summary class="Toggle__Summary"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">连接器：</strong></span><span class="SemanticString"> 身份认证和权限相关(登录 MySQL 的时候)。</span></span></summary><div class="Toggle__Content"><div id="https://www.notion.so/b92dcfb5f1b141cdbc29d85e2f3ad9d7" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">连接器主要和身份认证和权限相关的功能相关，就好比一个级别很高的门卫一样。</span></span></p></div><div id="https://www.notion.so/d0bb44948b7e4d09a2311c9109f37d27" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">主要负责用户登录数据库，进行用户的身份认证，包括校验账户密码，权限等操作，如果用户账户密码已通过，连接器会到权限表中查询该用户的所有权限，</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">之后在这个连接里的权限逻辑判断都是会依赖</strong></span><span class="SemanticString"><span class="SemanticString__Fragment SemanticString__Fragment--Unknown"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">此时</strong></span></span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">读取到的权限数据</strong></span><span class="SemanticString">，也就是说，后续只要这个</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">连接不断开</strong></span><span class="SemanticString">，即时管理员修改了该</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">用户的权限</strong></span><span class="SemanticString">，该用户也是</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">不受影响</strong></span><span class="SemanticString">的。</span></span></p></div><div id="https://www.notion.so/e00282147bcf4c5da84fc4594f380df5" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">作者：Levng</span><span class="SemanticString">链接：https://juejin.cn/post/7052198717557833741</span><span class="SemanticString">来源：稀土掘金</span><span class="SemanticString">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span></span></p></div></div></details><details id="https://www.notion.so/052c32d58fcc43f89d221501d02de1ab" class="ColorfulBlock ColorfulBlock--ColorDefault Toggle "><summary class="Toggle__Summary"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">查询缓存：</strong></span><span class="SemanticString"> 执行查询语句的时候，会先查询缓存。（MySQL 8.0 版本后移除，因为这个功能不太实用）。</span></span></summary><div class="Toggle__Content"><div id="https://www.notion.so/d1d7b7f426c94a2dad5e98042c1846bf" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">查询缓存主要用来缓存我们所执行的 SELECT 语句以及该语句的结果集。</span></span></p></div><div id="https://www.notion.so/8eb1920aa25d4238aa7f681294fbb32d" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">连接建立后，执行查询语句的时候，会先查询缓存，MySQL 会先校验这个 sql 是否执行过，以 Key-Value 的形式缓存在内存中，Key 是查询预计，Value 是结果集。如果缓存 key 被命中，就会直接返回给客户端，如果没有命中，就会执行后续的操作，完成后也会把结果缓存起来，方便下一次调用。当然在真正执行缓存查询的时候还是会校验用户的权限，是否有该表的查询条件。</span></span></p></div><div id="https://www.notion.so/ce4d4a82c97f40bab90b7a6926bef486" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">MySQL 查询不建议使用缓存，因为查询缓存失效在实际业务场景中可能会非常频繁，假如你对一个表更新的话，这个表上的所有的查询缓存都会被清空。对于不经常更新的数据来说，使用缓存还是可以的。所以，在大多数情况下不推荐使用查询缓存。</span></span></p></div></div></details><details id="https://www.notion.so/6ca83b80870043b6b24eabf04087ae7e" class="ColorfulBlock ColorfulBlock--ColorDefault Toggle "><summary class="Toggle__Summary"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">分析器：</strong></span><span class="SemanticString"> 没有命中缓存的话，SQL 语句就会经过分析器，分析器说白了就是要先看你的 SQL 语句要干嘛，再检查你的 SQL 语句语法是否正确。</span></span></summary><div class="Toggle__Content"><ul class="BulletedListWrapper"><li id="https://www.notion.so/cd5e8ea740c24790b8b782184c234a13" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">第一步：词法分析</strong></span><span class="SemanticString">，一条 SQL 语句有多个字符串组成，首先要提取关键字，比如 select，提出查询的表，提出字段名，提出查询条件等等。做完这些操作后，就会进入第二步。</span></span></li><li id="https://www.notion.so/d62d73dff4cc4e469079ff2961c371f9" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">第二步：语法分析</strong></span><span class="SemanticString">，主要就是判断你输入的 SQL 是否正确，是否符合 MySQL 的语法。</span></span></li></ul></div></details><details id="https://www.notion.so/cc8bd190f3e4413ba99cf2cd9955b13b" class="ColorfulBlock ColorfulBlock--ColorDefault Toggle "><summary class="Toggle__Summary"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">优化器：</strong></span><span class="SemanticString"> 按照 MySQL 认为最优的方案去执行。</span></span></summary><div class="Toggle__Content"><div id="https://www.notion.so/f51fcd0ee8a64313b68a4accfd02311c" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">优化器的作用就是它认为的最优的执行方案去执行。例如多个索引的时候该如何选择索引，多表查询的时候如何选择关联顺序等。可以说，经过了优化器之后可以说这个语句具体该如何执行就已经定下来。</span></span></p></div></div></details><details id="https://www.notion.so/f248486c75b14d3987f945d9af87571a" class="ColorfulBlock ColorfulBlock--ColorDefault Toggle "><summary class="Toggle__Summary"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">执行器</strong></span></span></summary><div class="Toggle__Content"><div id="https://www.notion.so/d3d469b325c046d59b62d58099875ae3" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">当选择了执行方案后，MySQL 就准备开始执行了，首先执行前会校验该用户有没有权限，如果没有权限，就会返回错误信息，如果有权限，就会去调用引擎的接口，返回接口执行的结果。</span></span></p></div></div></details><div id="https://www.notion.so/f509db5c755f469a9263f9dacfb1449d" class="Image Image--PageWidth"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F8b6588fc-d893-4aec-ae16-19003e0c095a%2FUntitled.png?width=672&amp;table=block&amp;id=f509db5c-755f-469a-9263-f9dacfb1449d"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F8b6588fc-d893-4aec-ae16-19003e0c095a%2FUntitled.png?width=672&amp;table=block&amp;id=f509db5c-755f-469a-9263-f9dacfb1449d" style="width:100%"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/8c4a05e897964aa8a964a48ee328217a" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">Server层</strong></span></span><div id="https://www.notion.so/50ad8613cbcc49728956376d7967f63d" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">主要包括连接器、查询缓存（MySQL8.0移除）、分析器、优化器、执行器等，所有的跨存储引擎的功能都在这一层实现，比如存储过程、触发器、视图、函数等，还有一个通用的日志模块binlog。</span></span></p></div></li><li id="https://www.notion.so/708d3fce31614820ad5436e5ba737300" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">存储引擎</strong></span></span><div id="https://www.notion.so/b60a7814482c4642ad02b32d09b93d69" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">主要负责数据的存储和读取，采用可以替换的插件式架构，支持InnoDB、MyISAM、Memory等多个存储引擎，其中InnnoDB有属于自己的日志模块。现在最常用的存储引擎是InnoDB，它从MySQL5.5.5版本开始被当做默认的存储引擎了。</span></span></p></div></li></ul><h2 id="https://www.notion.so/2b794c719e004826a504c024e94087ab" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/2b794c719e004826a504c024e94087ab"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorGreen">查询/修改/定义 语句</mark></span></span></h2><details id="https://www.notion.so/9dedc094c5b54e04b14ec2ad2293f5cb" class="ColorfulBlock ColorfulBlock--ColorDefault Toggle "><summary class="Toggle__Summary"><span class="SemanticStringArray"><span class="SemanticString">查询语句</span></span></summary><div class="Toggle__Content"><ul class="BulletedListWrapper"><li id="https://www.notion.so/dccd1cf8fd584b759a0b8a1aee01238b" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">基本查询</span></span></li><li id="https://www.notion.so/9b46b1649c834601b54caf704deafaf7" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">条件查询</span></span></li><li id="https://www.notion.so/189c685bdbc442e288e89fbdd428b9cd" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">投影查询</span></span></li><li id="https://www.notion.so/c8154624abfc4e22830606d2f4c0a20a" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">排序</span></span></li><li id="https://www.notion.so/16d4cad3a90846c094ba7351affcb004" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">分页查询</span></span></li><li id="https://www.notion.so/d3a54e526fd5406b8fb1c41c44b4d953" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">聚合查询</span></span></li><li id="https://www.notion.so/2006dd194f3c459d981fcc231f511ea8" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">多表查询</span></span></li><li id="https://www.notion.so/bca38d11eb414e67a6737e21a3b80bd2" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">连接查询</span></span></li></ul></div></details><details id="https://www.notion.so/f34c7612dbcf444ca8f28eb190b785e3" class="ColorfulBlock ColorfulBlock--ColorDefault Toggle "><summary class="Toggle__Summary"><span class="SemanticStringArray"><span class="SemanticString">修改语句</span></span></summary><div class="Toggle__Content"><ul class="BulletedListWrapper"><li id="https://www.notion.so/c76b1de91ae54dc39b20a462078e6083" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">INSERT</span></span></li><li id="https://www.notion.so/6e3e65084f3641e8ad3fd49e32b4576d" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">UPDATE</span></span></li><li id="https://www.notion.so/a89a69ca62ab4fe4bed05610eb16bf3e" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">DELETE</span></span></li></ul></div></details><details id="https://www.notion.so/b3e7fea8d07c4d36860c5cfa47c20950" class="ColorfulBlock ColorfulBlock--ColorDefault Toggle "><summary class="Toggle__Summary"><span class="SemanticStringArray"><span class="SemanticString">定义语句</span></span></summary><div class="Toggle__Content"><ul class="BulletedListWrapper"><li id="https://www.notion.so/092491d91dde47a3a5e9eff677a7d369" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">CREATE</span></span></li><li id="https://www.notion.so/c726773d69e24a43ae4a2dabcdba85ed" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">ALTER</span></span></li></ul></div></details><div id="https://www.notion.so/97109420e1e84e6ab2decf51f6ff240a" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorRed"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://www.w3schools.com/sql/">https://www.w3schools.com/sql/</a></mark></span></span></p></div><h2 id="https://www.notion.so/c17677fdd56d478982b1a31f70c60f95" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/c17677fdd56d478982b1a31f70c60f95"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorGreen">PROCEDURE, FUNCTION, TRIGGER</mark></span></span></h2><h3 id="https://www.notion.so/a0bb851be5324270a21968830c4a995d" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/a0bb851be5324270a21968830c4a995d"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorPurple">Trigger</mark></span></span></h3><ul class="BulletedListWrapper"><li id="https://www.notion.so/89f49cb1d1034173b82908053c8b0194" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">触发器（TRIGGER）：是由事件来触发某个操作。当数据库系统执行这些事件时，就会激活触发器执行相应的操作。</span></span></li><li id="https://www.notion.so/ec37e33072924f2ebb4bca401a865903" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">触发事件：INSERT语句、UPDATE语句和DELETE语句。</span></span></li><li id="https://www.notion.so/8e5a7b1d11f844cca13fc40756ab618b" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">创建触发器</span></span><details id="https://www.notion.so/b8aac5ac3dc5444b912d282131ebdfd2" class="ColorfulBlock ColorfulBlock--ColorDefault Toggle "><summary class="Toggle__Summary"><span class="SemanticStringArray"><span class="SemanticString">创建只有一个执行语句的触发器</span></span></summary><div class="Toggle__Content"><pre id="https://www.notion.so/8134ff35dc4747cd982cda7920dec094" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">CREATE</span> <span class="token keyword">TRIGGER</span> trigger_name trigger_time trigger_event 
<span class="token keyword">ON</span> tb_name <span class="token keyword">FOR EACH ROW</span> trigger_stmt
<span class="token comment">/**
	trigger_name：触发器的名称
	tirgger_time：触发时机，为BEFORE或者AFTER
	trigger_event：触发事件，为INSERT、DELETE或者UPDATE
	tb_name：表示建立触发器的表明，就是在哪张表上建立触发器
	trigger_stmt：触发器的程序体，可以是一条SQL语句或者是用BEGIN和END包含的多条语句
	所以可以说MySQL创建以下六种触发器：
	BEFORE INSERT,BEFORE DELETE,BEFORE UPDATE
	AFTER INSERT,AFTER DELETE,AFTER UPDATE **/</span></span></span></span></code></pre></div></details><details id="https://www.notion.so/0557eff7abe7423fae1436dc30c306a7" class="ColorfulBlock ColorfulBlock--ColorDefault Toggle "><summary class="Toggle__Summary"><span class="SemanticStringArray"><span class="SemanticString">创建有多个执行语句的触发器</span></span></summary><div class="Toggle__Content"><pre id="https://www.notion.so/8f0eb5b7059046bea4931d4c4fdf7f12" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">DELIMITER</span> <span class="token operator">||</span>
mysql<span class="token operator">></span> <span class="token keyword">CREATE</span> <span class="token keyword">TRIGGER</span> demo BEFORE <span class="token keyword">DELETE</span>
    <span class="token operator">-</span><span class="token operator">></span> <span class="token keyword">ON</span> users <span class="token keyword">FOR EACH ROW</span>
    <span class="token operator">-</span><span class="token operator">></span> <span class="token keyword">BEGIN</span>
    <span class="token operator">-</span><span class="token operator">></span> <span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> logs <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">-</span><span class="token operator">></span> <span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> logs <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">-</span><span class="token operator">></span> <span class="token keyword">END</span>
    <span class="token operator">-</span><span class="token operator">></span> <span class="token operator">||</span>
Query OK<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.06</span> sec<span class="token punctuation">)</span>
mysql<span class="token operator">></span> <span class="token keyword">DELIMITER</span> <span class="token punctuation">;</span></span></span></span></code></pre><div id="https://www.notion.so/efe59bacb9c649d8b0358ff5d00c456c" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">其中，BEGIN与END之间的执行语句列表参数表示需要执行的多个语句，不同语句用分号隔开。</span></span></p></div><div id="https://www.notion.so/9040b60a663c434394a8b6e3244d9111" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">tips：</strong></span><span class="SemanticString">一般情况下，mysql默认是以“；”作为结束执行语句，与触发器中需要的分行起冲突。为解决此问题可用DELIMITER，如：DELIMITER“｜｜”，可以将结束符号变成“｜｜”。</span></span></p></div><div id="https://www.notion.so/2a123e5cfe004cccab42c50b283baa3c" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">当触发器创建完成后，可以用DELIMITER“；”，来将结束符号变回“；”</span></span></p></div></div></details></li></ul><h3 id="https://www.notion.so/09785f209c3642dea8f8a0af143e4aab" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/09785f209c3642dea8f8a0af143e4aab"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorPurple">Procedure</mark></span></span></h3><h3 id="https://www.notion.so/3dba3b256fbf4d8fa0a6ba6615ca5c7f" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/3dba3b256fbf4d8fa0a6ba6615ca5c7f"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorPurple">Function</mark></span></span></h3><h2 id="https://www.notion.so/2a099897c67b47659436e723caf3030c" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/2a099897c67b47659436e723caf3030c"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorGreen">EVENT</mark></span></span></h2><h2 id="https://www.notion.so/c7f356b733a041908eca03491e35fef7" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/c7f356b733a041908eca03491e35fef7"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorGreen">VIEW</mark></span></span></h2><h2 id="https://www.notion.so/1f9a516112a342d18a779fae9031f89a" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/1f9a516112a342d18a779fae9031f89a"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorGreen">MySQL索引（Index）</mark></span></span></h2><h3 id="https://www.notion.so/ca2c0279733b4268ac725ada3a885df1" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/ca2c0279733b4268ac725ada3a885df1"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorPurple">什么是索引？</mark></span></span></h3><ul class="BulletedListWrapper"><li id="https://www.notion.so/2afc4a4f5cf842cbbdc5a6e48b837b1e" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">索引是一种用于快速查询和检索数据的数据结构，其本质可以看作是一种排好序的数据结构。</span></span></li><li id="https://www.notion.so/9a4527345be0481caba2229ebd8cf410" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">不使用索引，数据库引擎将遍历整个表。</span></span><ul class="BulletedListWrapper"><li id="https://www.notion.so/a07ee0c37a4f4de2910d9ae1e58b6032" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">从表面上看，索引类似于书的目录，在没有目录的情况下，要从书中查找某项内容就必须阅读全文，而有了目录之后，通过页码就可以很快定位到相关内容。</span></span></li><li id="https://www.notion.so/84c897cb2a1e4099a193aa65b3b73aa3" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">从本质上看，</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">索引是根据表的一个或者多个字段生成的子表</strong></span><span class="SemanticString">，该子表中的数据已经进行了排序。子表除了包含指定字段中的数据，还包含一个 rowid 列，用于存储当前记录在原始表中的位置。用户无法看到索引，它只是用来加快查询速度。</span></span></li></ul></li><li id="https://www.notion.so/dc4565be6a134200b0417be860561c61" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">索引底层数据结构存在很多种类型，常见的索引结构有: B 树， B+树 和 Hash、红黑树。在 MySQL 中，无论是 Innodb 还是 MyIsam，都使用了 B+树作为索引结构。</span></span></li><li id="https://www.notion.so/b8e55b9f698d4d309db2f5219e869661" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">索引的效率取决于索引列的值是否散列，</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">即该列的值如果越互不相同，那么索引效率越高</strong></span><span class="SemanticString">。反过来，如果记录的列存在大量相同的值，例如</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">gender</strong></span><span class="SemanticString">列，大约一半的记录值是M另一半是F因此，对该列创建索引就没有意义。</span></span></li></ul><h3 id="https://www.notion.so/6db713dc840d4a7face4e834d532da51" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/6db713dc840d4a7face4e834d532da51"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorPurple"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">索引的优缺点</strong></mark></span></span></h3><div id="https://www.notion.so/adfeb5d8a10b46e891cc06841982544f" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">优点</strong></span><span class="SemanticString"> ：</span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/bc83b9c1f88744ae8f837f1b78bcbd18" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">使用索引可以大大加快数据的</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">检索速度</strong></span><span class="SemanticString">（大大减少检索的数据量），这也是创建索引的最主要的原因。</span></span></li><li id="https://www.notion.so/c324f4a4e64b44a2b8163ac71e6f6f49" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">通过创建唯一性索引，可以保证数据库表中每一行数据的</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">唯一性</strong></span><span class="SemanticString">。</span></span></li></ul><div id="https://www.notion.so/18549e7e0fd54ed294da3a70098ed1b1" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">缺点</strong></span><span class="SemanticString"> ：</span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/087bb010539c47a997adf4537e5b40da" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">创建索引和维护索引需要耗费许多时间</strong></span><span class="SemanticString">。当对表中的数据进行增删改的时候，如果数据有索引，那么索引也需要动态的修改，会降低 SQL 执行效率。</span></span></li><li id="https://www.notion.so/1958f5a7a681470db52cba9e66f3f57f" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">索引需要</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">使用物理文件存储</strong></span><span class="SemanticString">，也会耗费一定空间。</span></span></li></ul><h3 id="https://www.notion.so/3285a3b462fd4940ad6de6fa0cd409d1" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/3285a3b462fd4940ad6de6fa0cd409d1"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorPurple">语句</mark></span></span></h3><pre id="https://www.notion.so/34cc75848c6e4cadbc67015f639b8a0a" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> table_name<span class="token punctuation">[</span>col_name <span class="token keyword">data</span> <span class="token keyword">type</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword">unique</span><span class="token operator">|</span>fulltext<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token keyword">index</span><span class="token operator">|</span><span class="token keyword">key</span><span class="token punctuation">]</span><span class="token punctuation">[</span>index_name<span class="token punctuation">]</span><span class="token punctuation">(</span>col_name<span class="token punctuation">[</span>length<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token keyword">asc</span><span class="token operator">|</span><span class="token keyword">desc</span><span class="token punctuation">]</span></span></span></span></code></pre><ol class="NumberedListWrapper"><li id="https://www.notion.so/86a2e77b25ee4ab683e53d18a044c0c5" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString">unique | fulltext 为可选参数，分别表示唯一索引、全文索引</span></span></li><li id="https://www.notion.so/9bf69b6cd43a49d78865b75c78c13616" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString">index和key为同义词，两者作用相同，用来指定创建索引</span></span></li><li id="https://www.notion.so/555e6dc95a6b4dcaa32fc5417455661f" class="NumberedList" value="3"><span class="SemanticStringArray"><span class="SemanticString">col_name为需要创建索引的字段列，该列必须从数据表中该定义的多个列中选择</span></span></li><li id="https://www.notion.so/ca816b9a27114f74ba71e3a50254d7f8" class="NumberedList" value="4"><span class="SemanticStringArray"><span class="SemanticString">index_name指定索引的名称，为可选参数，如果不指定，默认col_name为索引值</span></span></li><li id="https://www.notion.so/4cc28cb8b48c4c46b987b57a9ceca114" class="NumberedList" value="5"><span class="SemanticStringArray"><span class="SemanticString">length为可选参数，表示索引的长度，只有字符串类型的字段才能指定索引长度</span></span></li><li id="https://www.notion.so/fdb0c99d54514dacbe5babdbdc4c4c96" class="NumberedList" value="6"><span class="SemanticStringArray"><span class="SemanticString">asc或desc指定升序或降序的索引值存储</span></span></li></ol><h3 id="https://www.notion.so/78337035086d44d5a77f7e468db43fdc" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/78337035086d44d5a77f7e468db43fdc"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorPurple">索引类型</mark></strong></span></span></h3><ol class="NumberedListWrapper"><li id="https://www.notion.so/760b8f8b123f4697b5935ff8a989c0e3" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString">普通索引</span></span><div id="https://www.notion.so/9caaf41baa7d4e4c96728976786f2a33" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">是最基本的索引，它没有任何限制。</span></span></p></div><details id="https://www.notion.so/30ee416fa24f4a7582ef28ac71cc2171" class="ColorfulBlock ColorfulBlock--ColorDefault Toggle "><summary class="Toggle__Summary"><span class="SemanticStringArray"><span class="SemanticString">它有以下几种创建方式</span></span></summary><div class="Toggle__Content"><pre id="https://www.notion.so/9010e3d12b16495ba748387b1e340dd7" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token comment">/* 直接创建索引 */</span>
<span class="token keyword">CREATE</span> <span class="token keyword">INDEX</span> index_name <span class="token keyword">ON</span> <span class="token keyword">table</span><span class="token punctuation">(</span><span class="token keyword">column</span><span class="token punctuation">(</span>length<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">/* 修改表结构的方式添加索引 */</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> table_name <span class="token keyword">ADD</span> <span class="token keyword">INDEX</span> index_name <span class="token keyword">ON</span> <span class="token punctuation">(</span><span class="token keyword">column</span><span class="token punctuation">(</span>length<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">/* 创建表的时候同时创建索引 */</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token identifier"><span class="token punctuation">`</span>table<span class="token punctuation">`</span></span> <span class="token punctuation">(</span>
    <span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">AUTO_INCREMENT</span> <span class="token punctuation">,</span>
    <span class="token identifier"><span class="token punctuation">`</span>title<span class="token punctuation">`</span></span> <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token keyword">CHARACTER</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token punctuation">,</span>
    <span class="token identifier"><span class="token punctuation">`</span>content<span class="token punctuation">`</span></span> <span class="token keyword">text</span> <span class="token keyword">CHARACTER</span> <span class="token boolean">NULL</span> <span class="token punctuation">,</span>
    <span class="token identifier"><span class="token punctuation">`</span>time<span class="token punctuation">`</span></span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token punctuation">,</span>
    <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">INDEX</span> index_name <span class="token punctuation">(</span>title<span class="token punctuation">(</span>length<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span></span></span></span></code></pre></div></details></li><li id="https://www.notion.so/9eaad0a2f5f8488f9cc1b243eb43bb21" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString">唯一索引</span></span><div id="https://www.notion.so/114112a52ced442ba6e1fbc396f148ca" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">与前面的普通索引类似，不同的就是：索引列的值必须唯一，但允许有空值。如果是组合索引，则列值的组合必须唯一。</span></span></p></div><details id="https://www.notion.so/7f011a56d1de4b0a99513f2b7d8b3d5f" class="ColorfulBlock ColorfulBlock--ColorDefault Toggle "><summary class="Toggle__Summary"><span class="SemanticStringArray"><span class="SemanticString">它有以下几种创建方式</span></span></summary><div class="Toggle__Content"><pre id="https://www.notion.so/e1151eed7744424abb6e5bb7ed2b6c6e" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token comment">/* 创建唯一索引 */</span>
<span class="token keyword">CREATE</span> <span class="token keyword">UNIQUE</span> <span class="token keyword">INDEX</span> indexName <span class="token keyword">ON</span> <span class="token keyword">table</span><span class="token punctuation">(</span><span class="token keyword">column</span><span class="token punctuation">(</span>length<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">/* 修改表结构 */</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> table_name <span class="token keyword">ADD</span> <span class="token keyword">UNIQUE</span> indexName <span class="token keyword">ON</span> <span class="token punctuation">(</span><span class="token keyword">column</span><span class="token punctuation">(</span>length<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">/* 创建表的时候直接指定 */</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token identifier"><span class="token punctuation">`</span>table<span class="token punctuation">`</span></span> <span class="token punctuation">(</span>
    <span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">AUTO_INCREMENT</span> <span class="token punctuation">,</span>
    <span class="token identifier"><span class="token punctuation">`</span>title<span class="token punctuation">`</span></span> <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token keyword">CHARACTER</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token punctuation">,</span>
    <span class="token identifier"><span class="token punctuation">`</span>content<span class="token punctuation">`</span></span> <span class="token keyword">text</span> <span class="token keyword">CHARACTER</span> <span class="token boolean">NULL</span> <span class="token punctuation">,</span>
    <span class="token identifier"><span class="token punctuation">`</span>time<span class="token punctuation">`</span></span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token punctuation">,</span>
    <span class="token keyword">UNIQUE</span> indexName <span class="token punctuation">(</span>title<span class="token punctuation">(</span>length<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></span></span></span></code></pre></div></details></li><li id="https://www.notion.so/8d3d8c4425f545b79045d5b92d03dff6" class="NumberedList" value="3"><span class="SemanticStringArray"><span class="SemanticString">主键索引</span></span><div id="https://www.notion.so/54178f8c326f4b3d86108d705d7006cc" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">是一种特殊的唯一索引，一个表只能有一个主键，不允许有空值。</span></span></p></div><details id="https://www.notion.so/fc947a897d9a4259ac809b8a11b8e51e" class="ColorfulBlock ColorfulBlock--ColorDefault Toggle "><summary class="Toggle__Summary"><span class="SemanticStringArray"><span class="SemanticString">一般是在建表的时候同时创建主键索引。</span></span></summary><div class="Toggle__Content"><pre id="https://www.notion.so/52cebc2c07f44b9093b65cb15294ca7d" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token identifier"><span class="token punctuation">`</span>table<span class="token punctuation">`</span></span> <span class="token punctuation">(</span>
    <span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">AUTO_INCREMENT</span> <span class="token punctuation">,</span>
    <span class="token identifier"><span class="token punctuation">`</span>title<span class="token punctuation">`</span></span> <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token punctuation">,</span>
    <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></span></span></span></code></pre></div></details><div id="https://www.notion.so/3e385c0a1b9e4c048addd3e13d6daad4" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">在 MySQL 的 InnoDB 的表中，当没有显示的指定表的主键时，InnoDB 会自动先检查表中是否有唯一索引且不允许存在 null 值的字段，如果有，则选择该字段为默认的主键，否则 InnoDB 将会自动创建一个 6Byte 的自增主键。</span></span></p></div></li><li id="https://www.notion.so/1564ade9207343d1aab2886329b1ad61" class="NumberedList" value="4"><span class="SemanticStringArray"><span class="SemanticString">组合索引</span></span><div id="https://www.notion.so/9c2042a42f014bd2a04dc8d65d9cd3b3" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">指多个字段上创建的索引，只有在查询条件中使用了创建索引时的第一个字段，索引才会被使用。</span></span></p></div><details id="https://www.notion.so/71c49f6983354acdb15b8431fb193373" class="ColorfulBlock ColorfulBlock--ColorDefault Toggle "><summary class="Toggle__Summary"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">使用组合索引时遵循最左前缀集合。</strong></span></span></summary><div class="Toggle__Content"><pre id="https://www.notion.so/536319eb315f489dbec6e9a222a9e317" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> <span class="token identifier"><span class="token punctuation">`</span>table<span class="token punctuation">`</span></span> <span class="token keyword">ADD</span> <span class="token keyword">INDEX</span> name_city_age <span class="token punctuation">(</span>name<span class="token punctuation">,</span>city<span class="token punctuation">,</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span></span></span></span></code></pre></div></details></li><li id="https://www.notion.so/cb8ba8966e39444db88c7bba60af0a72" class="NumberedList" value="5"><span class="SemanticStringArray"><span class="SemanticString">全文索引</span></span><div id="https://www.notion.so/e7f24959d7134308a4ec21d330afd85c" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">主要用来查找文本中的关键字，而不是直接与索引中的值相比较。fulltext索引跟其它索引大不相同，它更像是一个搜索引擎，而不是简单的where语句的参数匹配。fulltext索引配合match against操作使用，而不是一般的where语句加like。它可以在create table，alter table ，create index使用，不过目前只有char、varchar，text 列上可以创建全文索引。</span></span></p></div><div id="https://www.notion.so/d17d1237c94844d29f8d337129d87d7d" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">值得一提的是，在数据量较大时候，现将数据放入一个没有全局索引的表中，然后再用CREATE index创建fulltext索引，要比先为一张表建立fulltext然后再将数据写入的速度快很多。</span></span></p></div><pre id="https://www.notion.so/95484e9e980b4c55babcd579808d769d" class="Code Code--NoWrap"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">CREATE</span> FULLTEXT <span class="token keyword">INDEX</span> index_content <span class="token keyword">ON</span> table_name<span class="token punctuation">(</span>content<span class="token punctuation">)</span></span></span></span></code></pre></li></ol><h3 id="https://www.notion.so/f77e7b649a944ed2a40a1c58f41d12d1" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/f77e7b649a944ed2a40a1c58f41d12d1"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorPurple"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">正确使用索引的建议</strong></mark></span></span></h3><details id="https://www.notion.so/68abc8063cbd435f8f820e1d816c9368" class="ColorfulBlock ColorfulBlock--ColorDefault Toggle "><summary class="Toggle__Summary"><span class="SemanticStringArray"><span class="SemanticString">见如下八点</span></span></summary><div class="Toggle__Content"><ol class="NumberedListWrapper"><li id="https://www.notion.so/10aa76e3a0fb4cde9e0e0f5e8512606b" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorOrange"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">选择合适的字段创建索引</strong></mark></span></span><ol class="NumberedListWrapper"><li id="https://www.notion.so/9fdd20490dbd4b688db2cb7c90e1f511" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">不为 NULL 的字段</strong></span><span class="SemanticString"> ：索引字段的数据应该尽量不为 NULL，因为对于数据为 NULL 的字段，数据库较难优化。如果字段频繁被查询，但又避免不了为 NULL，建议使用 0,1,true,false 这样语义较为清晰的短值或短字符作为替代。</span></span></li><li id="https://www.notion.so/ebd08e8ce2b447fb81057cd525300399" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">被频繁查询的字段</strong></span><span class="SemanticString"> ：我们创建索引的字段应该是查询操作非常频繁的字段。</span></span></li><li id="https://www.notion.so/9d0fc114fdb34368bdcb79a4d7b4ee9c" class="NumberedList" value="3"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">被作为条件查询的字段</strong></span><span class="SemanticString"> ：被作为 WHERE 条件查询的字段，应该被考虑建立索引。</span></span></li><li id="https://www.notion.so/7691fc2c2fdb4b44afd0ed864caa87ad" class="NumberedList" value="4"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">频繁需要排序的字段</strong></span><span class="SemanticString"> ：索引已经排序，这样查询可以利用索引的排序，加快排序查询时间。</span></span></li><li id="https://www.notion.so/d5f1c6c27aa94a28aaf1b2ad241cd920" class="NumberedList" value="5"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">被经常频繁用于连接的字段</strong></span><span class="SemanticString"> ：经常用于连接的字段可能是一些外键列，对于外键列并不一定要建立外键，只是说该列涉及到表与表的关系。对于频繁被连接查询的字段，可以考虑建立索引，提高多表连接查询的效率。</span></span></li></ol></li><li id="https://www.notion.so/427bc00a50e34953a250f438fef3c7f7" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorOrange"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">被频繁更新的字段应该慎重建立索引</strong></mark></span></span><div id="https://www.notion.so/a875756f50b347c886d4932168a1b28b" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">虽然索引能带来查询上的效率，但是维护索引的成本也是不小的。 如果一个字段不被经常查询，反而被经常修改，那么就更不应该在这种字段上建立索引了。</span></span></p></div></li><li id="https://www.notion.so/5f8260e1060b411bb766339ff0dac5d9" class="NumberedList" value="3"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorOrange"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">限制每张表上的索引数量</strong></mark></span></span><div id="https://www.notion.so/0d4413fbbc134f91ae37fe4c264b3167" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">索引并不是越多越好，建议单张表索引不超过 5 个。索引可以提高效率同样可以降低效率。索引可以增加查询效率，但同样也会降低插入和更新的效率，甚至有些情况下会降低查询效率。因为 MySQL 优化器在选择如何优化查询时，会根据统一信息，对每一个可以用到的索引来进行评估，以生成出一个最好的执行计划，如果同时有很多个索引都可以用于查询，就会增加 MySQL 优化器生成执行计划的时间，同样会降低查询性能。</span></span></p></div></li><li id="https://www.notion.so/1c7ea3b7275e411ea2eb3eab292b33e0" class="NumberedList" value="4"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorOrange">尽可能的考虑建立联合索引而不是单列索引</mark></strong></span></span><div id="https://www.notion.so/c2d01886d9dc4b7ea396bbfd417fc713" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">因为索引是需要占用磁盘空间的，可以简单理解为每个索引都对应着一颗 B+树。如果一个表的字段过多，索引过多，那么当这个表的数据达到一个体量后，索引占用的空间也是很多的，且修改索引时，耗费的时间也是较多的。如果是联合索引，多个字段在一个索引上，那么将会节约很大磁盘空间，且修改数据的操作效率也会提升。</span></span></p></div></li><li id="https://www.notion.so/5bbdb666d1d44c3bbc30977e48fcc027" class="NumberedList" value="5"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorOrange"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">注意避免冗余索引</strong></mark></span></span><div id="https://www.notion.so/52b82a9787b94a8f936b144c47b38358" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">冗余索引指的是索引的功能相同，能够命中索引(a, b)就肯定能命中索引(a) ，那么索引(a)就是冗余索引。如（name,city）和（name）这两个索引就是冗余索引，能够命中前者的查询肯定是能够命中后者的 在大多数情况下，都应该尽量扩展已有的索引而不是创建新索引。</span></span></p></div></li><li id="https://www.notion.so/abc1d502c5ec49bdb6e4b8c507aa94ed" class="NumberedList" value="6"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorOrange"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">字符串类型的字段使用前缀索引代替普通索引</strong></mark></span></span><div id="https://www.notion.so/f8337834a58741248db7e94435cf90c3" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">前缀索引仅限于字符串类型，较普通索引会占用更小的空间，所以可以考虑使用前缀索引带替普通索引。</span></span></p></div></li><li id="https://www.notion.so/34a713e642a74e7bb795f11a350586b2" class="NumberedList" value="7"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorOrange"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">避免索引失效</strong></mark></span></span><div id="https://www.notion.so/03c3a9354bcf40d2a3b359efb7b18aa4" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">索引失效也是慢查询的主要原因之一，常见的导致索引失效的情况有下面这些：</span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/28fca964d1b745d588bf78df85247b1e" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">使用 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">SELECT *</code></span><span class="SemanticString"> 进行查询;</span></span></li><li id="https://www.notion.so/9b1f1928f23a4bca9587597c78861163" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">创建了组合索引，但查询条件未准守最左匹配原则;</span></span></li><li id="https://www.notion.so/5b16284b523143ae9de63ae8672858b2" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">在索引列上进行计算、函数、类型转换等操作;</span></span></li><li id="https://www.notion.so/da2296bbbb414926883b8fc69bc028ac" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">以 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">%</code></span><span class="SemanticString"> 开头的 LIKE 查询比如 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">like &#x27;%abc&#x27;</code></span><span class="SemanticString">;</span></span></li><li id="https://www.notion.so/a3e46ce49fba4eb59d682410b0cb174a" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">查询条件中使用 or，且 or 的前后条件中有一个列没有索引，涉及的索引都不会被使用到;</span></span></li><li id="https://www.notion.so/1028a03a4b674c948be16dd8e3d9e06d" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">发生</span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://javaguide.cn/database/mysql/index-invalidation-caused-by-implicit-conversion.html">隐式转换open in new window</a></span><span class="SemanticString">;</span></span></li></ul></li><li id="https://www.notion.so/a65c8511b6d1447aa8c8741677061800" class="NumberedList" value="8"><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorOrange"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">删除长期未使用的索引</strong></mark></span></span><div id="https://www.notion.so/27bab38f38f048b499ff17c880f333be" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">删除长期未使用的索引，不用的索引的存在会造成不必要的性能损耗。</span></span></p></div><div id="https://www.notion.so/331ecb89d1da4438964bf44ca7fe4357" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">MySQL 5.7 可以通过查询 sys 库的 schema_unused_indexes 视图来查询哪些索引从未被使用。</span></span></p></div></li></ol></div></details><h2 id="https://www.notion.so/ccb7326e6b8c4e7b84a1bfe757c6cb67" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/ccb7326e6b8c4e7b84a1bfe757c6cb67"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorGreen">MySQL事务（Transaction）</mark></span></span></h2><h2 id="https://www.notion.so/d304108abbc544dda3c2a7f801ef5d5a" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/d304108abbc544dda3c2a7f801ef5d5a"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorGreen">MySQL锁（Lock）</mark></span></span></h2><h2 id="https://www.notion.so/010bb296c07f4f0fbca33a0c400fa5f9" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/010bb296c07f4f0fbca33a0c400fa5f9"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorGreen">WINDOW FUNCTION</mark></span></span></h2><div id="https://www.notion.so/7e34ede7805a4068b2641af1091efe3e" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/4ddb213f559b4c53b2fb622030da2088" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/75c6669079934f33bec54d24274edbb2" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/50bd3a9d5ec44e4a9182465fb5a8ce2d" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/0420025db6ae4102930c83ab070a4152" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/505f07b1739246ef94e1093710d2734b" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/7e52f011e6c24acf991577c46ceca2c3" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/8f6c56048671430da1043e915baee47e" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/d742ef02bd12404d8f40c6e4ad136899" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div></article>
  <footer class="Footer">
  <div>&copy; Welcome to Robin’s Blog 2022</div>
  <div>&centerdot;</div>
  <div>Powered by <a href="https://github.com/dragonman225/notablog" target="_blank"
      rel="noopener noreferrer">Notablog</a>.
  </div>
</footer>
</body>

</html>